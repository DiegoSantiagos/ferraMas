{% extends 'templateBase.html' %}
{% block content %}
<div class="container py-5">
    <h1>Administración</h1>

    <!-- Botón para mostrar el formulario de agregar producto (opcional) -->
    <button class="btn btn-success mb-3" type="button" data-bs-toggle="collapse" data-bs-target="#formAgregar">
        Agregar Producto
    </button>

    <!-- Formulario para agregar producto -->
    <div class="collapse mb-4" id="formAgregar">
        <form method="post">
            {% csrf_token %}
            <div class="row">
                <div class="col">
                    <input required class="form-control" name="idProducto" placeholder="ID Producto">
                </div>
                <div class="col">
                    <input required class="form-control" name="nombre" placeholder="Nombre">
                </div>
                <div class="col">
                    <input required class="form-control" type="number" name="precio" placeholder="Precio">
                </div>
                <div class="col">
                    <input required class="form-control" type="number" name="stock" placeholder="Stock">
                </div>
                <div class="col">
                    <input required class="form-control" type="number" name="stockMinimo" placeholder="Stock Minimo">
                </div>
                <div class="col">
                    <input required class="form-control" name="idCategoria" placeholder="ID Categoria">
                </div>
            </div>
            <button type="submit" name="agregar" class="btn btn-primary mt-3">Guardar</button>
        </form>
    </div>

    <!-- Lista de productos con botones de eliminar -->
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Precio</th>
                <th>Stock</th>
                <th>Stock Minimo</th>
                <th>Categoría</th>
                <th>Eliminar</th>
            </tr>
        </thead>
        <tbody>
            {% for producto in productos %}
            <tr>
                <td>{{ producto.idProducto }}</td>
                <td>{{ producto.nombre }}</td>
                <td>{{ producto.precio }}</td>
                <td>{{ producto.stock }}</td>
                <td>{{ producto.stockMinimo }}</td>
                <td>{{ producto.idCategoria }}</td>
                <td>
                    <form method="post" style="display:inline;">
                        {% csrf_token %}
                        <button class="btn btn-danger btn-sm" name="eliminar" value="{{ producto.idProducto }}" onclick="return confirm('¿Seguro que deseas eliminar?')">
                            Eliminar
                        </button>
                    </form>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="7" class="text-center">No hay productos</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}